-- Ultimate All-in-One Command Panel GUI
-- Place in StarterPlayerScripts

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterPack = game:GetService("StarterPack")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Game mapping
local games = {
    ["Blox Fruits"] = 2753915549,
    ["Adopt Me"] = 920587237,
    ["Brookhaven"] = 4924922222,
    ["Grow A Garden"] = 123456789,
    ["Fisch"] = 987654321
}

-- Commands for autocomplete
local commands = {
    "leave","join","report","heal","speed","jump","fly",
    "noclip","sit","tp","give","headsit","rspy","invisible","reset"
}

-- Example report event
local reportEvent = ReplicatedStorage:WaitForChild("ReportPlayer") -- adjust per game

-- Functions
local function spamReport(targetName)
    local target = Players:FindFirstChild(targetName)
    if target then
        for i = 1, 50 do
            pcall(function()
                reportEvent:FireServer({
                    Player = target,
                    Reason = "Harassment"
                })
            end)
        end
        print("Spam report sent to "..targetName)
    else
        print("Player not found: "..targetName)
    end
end

local function giveTool(toolName)
    local tool = StarterPack:FindFirstChild(toolName) or ReplicatedStorage:FindFirstChild(toolName)
    if tool then
        tool:Clone().Parent = player.Backpack
        print("Given tool: "..toolName)
    else
        print("Tool not found: "..toolName)
    end
end

local function headSit(targetName)
    local target = Players:FindFirstChild(targetName)
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.new(0,3,0)
        humanoid.Sit = true
        print("Headsit on "..targetName)
    else
        print("Target not found")
    end
end

local function executeCommand(cmd)
    local msg = cmd:lower()
    
    if msg == "leave" then
        game:Shutdown()
    elseif msg:sub(1,5) == "join " then
        local gameName = cmd:sub(6)
        local gameId = games[gameName] or games[gameName:lower()]
        if gameId then TeleportService:Teleport(gameId, player)
        else print("Invalid game") end
    elseif msg:sub(1,7) == "report " then
        spamReport(cmd:sub(8))
    elseif msg == "heal" then
        humanoid.Health = humanoid.MaxHealth
    elseif msg:sub(1,6) == "speed " then
        local val = tonumber(cmd:sub(7))
        if val then humanoid.WalkSpeed = val end
    elseif msg:sub(1,5) == "jump " then
        local val = tonumber(cmd:sub(6))
        if val then humanoid.JumpPower = val end
    elseif msg == "sit" then
        humanoid.Sit = true
    elseif msg == "fly" then
        local bodyVel = Instance.new("BodyVelocity")
        bodyVel.Velocity = Vector3.new(0,0,0)
        bodyVel.MaxForce = Vector3.new(0,0,0)
        bodyVel.Parent = character:FindFirstChild("HumanoidRootPart")
        print("Fly enabled")
    elseif msg == "noclip" then
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then part.CanCollide = false end
        end
        print("Noclip enabled")
    elseif msg:sub(1,3) == "tp " then
        local target = Players:FindFirstChild(cmd:sub(4))
        if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            character:MoveTo(target.Character.HumanoidRootPart.Position)
        end
    elseif msg:sub(1,5) == "give " then
        giveTool(cmd:sub(6))
    elseif msg:sub(1,8) == "headsit " then
        headSit(cmd:sub(9))
    elseif msg == "rspy" then
        print("Remote spy activated")
    elseif msg == "invisible" then
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then part.Transparency = 1 end
        end
    elseif msg == "reset" then
        player:LoadCharacter()
    else
        print("Unknown command: "..cmd)
    end
end

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "UltimateCommandPanel"
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.Enabled = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 500, 0, 400)
frame.Position = UDim2.new(0.5, -250, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,50)
title.BackgroundColor3 = Color3.fromRGB(50,50,50)
title.Text = "✨ Ultimate Command Panel ✨"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.TextScaled = true
title.Parent = frame

-- Command Textbox
local commandBox = Instance.new("TextBox")
commandBox.Size = UDim2.new(0.8,0,0,40)
commandBox.Position = UDim2.new(0.1,0,0,70)
commandBox.PlaceholderText = "Type command here..."
commandBox.TextColor3 = Color3.new(1,1,1)
commandBox.BackgroundColor3 = Color3.fromRGB(60,60,60)
commandBox.Parent = frame

-- Autocomplete suggestion frame
local suggestionFrame = Instance.new("Frame")
suggestionFrame.Size = UDim2.new(0.8,0,0,100)
suggestionFrame.Position = UDim2.new(0.1,0,0,120)
suggestionFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
suggestionFrame.Visible = false
suggestionFrame.Parent = frame

-- Update suggestions function
local function updateSuggestions(text)
    for _, child in pairs(suggestionFrame:GetChildren()) do
        if child:IsA("TextButton") then child:Destroy() end
    end
    local index = 0
    for _, cmd in pairs(commands) do
        if cmd:sub(1,#text):lower() == text:lower() then
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1,0,0,30)
            btn.Position = UDim2.new(0,0,0,index*30)
            btn.Text = cmd
            btn.TextColor3 = Color3.new(1,1,1)
            btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
            btn.Parent = suggestionFrame
            btn.MouseButton1Click:Connect(function()
                commandBox.Text = cmd
                suggestionFrame.Visible = false
            end)
            index = index + 1
        end
    end
    suggestionFrame.Size = UDim2.new(0.8,0,0,index*30)
    suggestionFrame.Visible = index > 0
end

commandBox:GetPropertyChangedSignal("Text"):Connect(function()
    if commandBox.Text ~= "" then updateSuggestions(commandBox.Text)
    else suggestionFrame.Visible = false end
end)

-- Execute Button
local executeBtn = Instance.new("TextButton")
executeBtn.Size = UDim2.new(0.3,0,0,40)
executeBtn.Position = UDim2.new(0.35,0,0,300)
executeBtn.Text = "Execute"
executeBtn.TextColor3 = Color3.fromRGB(255,255,255)
executeBtn.BackgroundColor3 = Color3.fromRGB(50,180,50)
executeBtn.Parent = frame

executeBtn.MouseButton1Click:Connect(function()
    executeCommand(commandBox.Text)
end)

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0.1, 0, 0, 40)        -- width 10%, height 40px
closeBtn.Position = UDim2.new(0.9, -10, 0, 10)  -- top-right corner with offset
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
closeBtn.BorderSizePixel = 0
closeBtn.Parent = frame

-- Close button functionality
closeBtn.MouseButton1Click:Connect(function()
    screenGui.Enabled = false
end)

-- Chat command to open the GUI
player.Chatted:Connect(function(msg)
    if msg:lower() == "panel" then
        screenGui.Enabled = true
    end
end)

-- Execute command on Enter
commandBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        executeCommand(commandBox.Text)
        commandBox.Text = ""
        suggestionFrame.Visible = false
    end
end)
